<!DOCTYPE html>
<html lang="pt">

<head>
  <!-- Meta tags para compatibilidade com vários navegadores -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <!-- Meta tags de SEO -->
    <meta name="keywords" content="MUFFINS TV - Filmes, Series, Animes" />
    <meta name="description" content="MUFFINS TV - Filmes, Series, Animes" />
    <meta name="author" content="MUFFINS TV" />
    <meta name="pushsdk" content="2eb356be5cc05ec8771838db4c23ddfb">

    <!-- Meta tag de Content Security Policy para compatibilidade com navegadores -->
    <meta http-equiv="Content-Security-Policy" 
    content="
        default-src *;
        script-src * 'unsafe-inline' 'unsafe-eval';
        style-src * 'unsafe-inline';
        font-src *;
        connect-src *;
        img-src * data:;
        media-src *;
        object-src 'none';
        frame-ancestors 'none';
        worker-src * 'self' blob:;
        child-src *;
    ">





   <title>MUFFINS TV - Filmes, Series e Animes</title>

   <!-- Favicon -->
   <link rel="shortcut icon" href="images/favicon.ico">
   <!-- CSS bootstrap -->
   <link rel="stylesheet" href="css/bootstrap.min.css" />
   <!-- Custom Style -->
   <link rel="stylesheet" href="css/style.css" />
   <!-- Responsive Style -->
   <link rel="stylesheet" href="css/responsive.css" />
   <link rel="stylesheet" href="css/load.css" />
</head>

<body>
   <!--==================== Loader =======================-->
   <div id="gen-loading">                                   
       <div id="gen-loading-center">                         
           <img src="images/m.png" alt="loading">        
       </div>                                                 
   </div>
   <div class="loader-container">
      <div class="loader"></div>
  </div>
   <!--====================== Loader ======================-->

   <div id="error-container" class="error-container" style="display: none;">
      <div class="error-message">
         <span class="error-text"></span>
         <button class="close-button">x</button>
      </div>
   </div>

   <!--========== Header ==============-->
   <!-- owl-carousel Banner Start -->
   <section class="pt-0 pb-0">
      <div class="container-fluid px-0">
         <div class="row no-gutters">
            <div class="col-12">
               <div class="gen-banner-movies banner-style-2">
                  <div id="movie-carousel" class="owl-carousel owl-loaded owl-drag" ></div>
                    
                  </div>
               </div>
            </div>
         </div>
      </div>
   </section>
   <!-- owl-carousel Banner End -->

   <!-- owl-carousel Videos Section-1 Start -->
   <section class="gen-section-padding-2">
      <div class="container">
         <div class="row">
            <div class="col-xl-6 col-lg-6 col-md-6">
               <h4 class="gen-heading-title">Actuais & Mais assistidos</h4>
            </div>
            <div class="col-xl-6 col-lg-6 col-md-6 d-none d-md-inline-block">
               <div class="gen-movie-action text-right">
                  <a href="movies-pagination.html?genre=Action" class="gen-button gen-button-flat">
                     <span class="text">Ver Mais</span>
                  </a>
               </div>
            </div>
         </div>
         <div class="row mt-3">
            <div class="col-12">
               <div class="gen-style-2">
                  <div class="owl-carousel owl-theme" id="all-time-hits-carousel" 
                       data-dots="false" data-nav="true"
                       data-desk_num="4" data-lap_num="3" 
                       data-tab_num="2" data-mob_num="1" 
                       data-mob_sm="1" data-autoplay="false" 
                       data-loop="false" data-margin="30">
                     <!-- Os itens do carrossel serão inseridos dinamicamente pelo JavaScript -->
                  </div>
               </div>
            </div>
         </div>
      </div>
   </section>
   <!-- owl-carousel Videos Section-1 End -->
   <section class="gen-section-padding-2">
    <div class="container">
       <div class="row">
          <div class="col-xl-6 col-lg-6 col-md-6">
             <h4 class="gen-heading-title">Melhores Programas de TV</h4>
          </div>
          <div class="col-xl-6 col-lg-6 col-md-6 d-none d-md-inline-block">
             <div class="gen-movie-action">
                <div class="gen-btn-container text-right">
                   <a href="tv-pagination.html" class="gen-button gen-button-flat">
                      <span class="text">Ver Mais</span>
                   </a>
                </div>
             </div>
          </div>
       </div>
       <div class="row mt-3">
          <div class="col-12">
             <div class="gen-style-2">
                <!-- Carrossel de filmes (Owl Carousel) -->
                <div class="owl-carousel owl-theme" id="tv-carossel" data-dots="false" data-nav="true"
                   data-desk_num="4" data-lap_num="3" data-tab_num="2" data-mob_num="1" data-mob_sm="1"
                   data-autoplay="false" data-loop="false" data-margin="30">
                   <!-- Os itens do carrossel serão inseridos dinamicamente pelo JavaScript -->
                </div>
             </div>
          </div>
       </div>
    </div>
 </section>
   <!-- owl-carousel Histórico de Filmes Assistidos Start -->
   <!--==================== Fim do Anúncio =======================-->

   <section class="gen-section-padding-2">
    <div class="container">
       <div class="row">
          <div class="col-xl-6 col-lg-6 col-md-6">
             <h4 class="gen-heading-title">Historico de filmes assistidos</h4>
          </div>
          <div class="col-xl-6 col-lg-6 col-md-6 d-none d-md-inline-block">
             <div class="gen-movie-action text-right">
                <a href="library.html" class="gen-button gen-button-flat">
                   <span class="text">Ver Mais</span>
                </a>
             </div>
          </div>
       </div>
       <div class="row mt-3">
          <div class="col-12">
             <div class="gen-style-2">
                <div class="owl-carousel owl-theme" id="movieshistory-carousel" 
                     data-dots="false" data-nav="true"
                     data-desk_num="4" data-lap_num="3" 
                     data-tab_num="2" data-mob_num="1" 
                     data-mob_sm="1" data-autoplay="false" 
                     data-loop="false" data-margin="30">
                   <!-- Os itens do carrossel serão inseridos dinamicamente pelo JavaScript -->
                </div>
             </div>
          </div>
       </div>
    </div>
 </section>
  <!-- owl-carousel Histórico de Filmes Assistidos End -->

   <!-- owl-carousel images Start -->
   <section class="pt-0 gen-section-padding-2 home-singal-silder">
    <div class="container">
       <div class="row">
          <div class="col-12">
             <div class="gen-banner-movies">
                <div class="owl-carousel owl-loaded owl-drag" id="addPost" data-dots="true" data-nav="false" data-desk_num="1"
                   data-lap_num="1" data-tab_num="1" data-mob_num="1" data-mob_sm="1" data-autoplay="true"
                   data-loop="true" data-margin="30">
                   <!-- Os anúncios serão inseridos aqui pelo JavaScript -->
                </div>
             </div>
          </div>
       </div>
    </div>
 </section>
 <style>
 .gen-tv-img img {
   width: 100%; /* Largura máxima do container */
   height: 150px; /* Defina uma altura fixa, ajuste conforme necessário */
   object-fit: cover; /* Garante que a imagem seja cortada para caber, sem distorção */
   object-position: center; /* Centraliza a imagem dentro do container */
   border-radius: 8px;

}
</style>
</div>

   <!-- owl-carousel images End -->
   <!-- Back-to-Top start -->
   <div id="back-to-top">
      <a class="top" id="top" href="#top"> <i class="ion-ios-arrow-up"></i> </a>
   </div>
   <!-- Back-to-Top end -->
   
  
  
   <script src="js/jquery-3.6.0.min.js"></script>
   <script src="js/bootstrap.min.js"></script>
   <script src="js/owl.carousel.min.js"></script>
   <script src="js/script.js"></script>
   <script src="js/content.js"></script>
   <script src="js/header.js"></script>
   <script>
    const baseUrl = 'https://muffins-tv-api-2f0282275534.herokuapp.com/muffins/v1/list-ads'; // Substitua pela URL real da sua API

    // Função para mostrar e ocultar o loader
    // function showLoading() {
    //     document.querySelector('.loader-container').style.display = 'flex';
    // }

    // function hideLoading() {
    //     document.querySelector('.loader-container').style.display = 'none';
    // }

    // Função para carregar anúncios
    async function loadAds() {
  try {
      // Fazendo a requisição para a API
      const response = await fetch(baseUrl);
      const data = await response.json();

      if (data.code === 0) {
          displayAds(data.ads); // Chama a função para exibir anúncios
      } else {
          console.error(data.message);
      }
  } catch (error) {
      console.error('Erro ao carregar anúncios:', error);
  }
}

// Função para exibir anúncios no HTML
function displayAds(ads) {
  const container = document.querySelector('#addPost');
  if (!container) {
      console.error('Elemento .owl-carousel não encontrado');
      return;
  }

  // Limpar conteúdo existente
  container.innerHTML = '';

  // Variável para controlar o carregamento das imagens
  let imagesLoaded = 0;

  // Função para inicializar o carrossel quando todas as imagens forem carregadas
  function initializeCarousel() {
      if (imagesLoaded === ads.length) {
          // Inicializar o Owl Carousel após adicionar o conteúdo
          $('#addPost').owlCarousel({
              items: 1,
              dots: true,
              nav: false,
              autoplay: true,
              loop: true,
              margin: 30
          });
      }
  }

  // Loop para adicionar cada anúncio ao container
  ads.forEach(ad => {
      const adHTML = `
      <div class="item" style="background-image: url(${ad.imageUrl})">
          <div class="gen-movie-contain h-100">
              <div class="container h-100">
                  <div class="row align-items-center h-100">
                      <div class="col-xl-6">
                          <div class="gen-movie-info">
                              <h3>${ad.title}</h3>
                          </div>
                          <div class="gen-movie-meta-holder">
                              <p>${ad.description}</p>
                          </div>
                          <div class="gen-movie-action">
                              <div class="gen-btn-container">
                                  <a href="${ad.link}" class="gen-button gen-button-dark">
                                      <span class="text">VER MAIS</span>
                                  </a>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
      `;

      container.insertAdjacentHTML('beforeend', adHTML);

      // Adicionar evento de carregamento para garantir que a imagem foi carregada
      const img = new Image();
      img.src = ad.imageUrl;
      img.onload = function () {
          imagesLoaded++;
          initializeCarousel();
      };
      img.onerror = function () {
          console.error('Erro ao carregar a imagem:', ad.imageUrl);
          imagesLoaded++;
          initializeCarousel();
      };
  });
}

// Carregar os anúncios na primeira vez que a página é aberta
loadAds();

 </script>

</body>
</html>
